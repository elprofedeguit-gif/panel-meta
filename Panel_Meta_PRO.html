<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Panel Meta Ads PRO</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
 --bg:#f4f6fb;
 --card:#ffffff;
 --primary:#1a237e;
 --accent:#3f51b5;
 --border:#e4e7ef;
 --ok:#2e7d32;
 --hold:#f9a825;
 --cut:#c62828;
}

body{
 margin:0;
 font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
 background:var(--bg);
 color:#222;
}

.wrapper{
 max-width:1200px;
 margin:auto;
 padding:30px;
}

.header{
 display:flex;
 justify-content:space-between;
 align-items:center;
 margin-bottom:20px;
}

h1{
 margin:0;
 font-size:28px;
 color:var(--primary);
}

button{
 background:var(--accent);
 color:white;
 border:none;
 padding:10px 18px;
 border-radius:8px;
 font-weight:bold;
 cursor:pointer;
}

.status{
 font-size:13px;
 color:#666;
 margin-bottom:20px;
}

.grid{
 display:grid;
 grid-template-columns:1fr 1fr;
 gap:20px;
}

.card{
 background:var(--card);
 padding:20px;
 border-radius:14px;
 box-shadow:0 10px 30px rgba(0,0,0,.05);
}

label{
 display:block;
 font-size:12px;
 font-weight:700;
 color:#6b7280;
 margin-top:12px;
}

input{
 width:100%;
 padding:12px;
 border-radius:8px;
 border:1px solid var(--border);
 font-size:16px;
 font-weight:600;
 margin-top:4px;
}

.iva{
 margin-top:10px;
 font-weight:bold;
 color:#555;
}

.metric{
 margin-bottom:18px;
}

.metric h3{
 margin:0 0 8px 0;
 font-size:15px;
 color:#444;
}

.state{
 font-size:18px;
 font-weight:900;
 margin-top:8px;
}

.ok{color:var(--ok);}
.hold{color:var(--hold);}
.cut{color:var(--cut);}

.divider{
 height:1px;
 background:var(--border);
 margin:16px 0;
}
</style>
</head>
<body>

<div class="wrapper">
  <div class="header">
    <h1>Panel Meta Ads PRO</h1>
    <button onclick="actualizarCotizacion()">Actualizar cotizaciÃ³n</button>
  </div>

  <div class="status" id="status">Actualizando cotizaciÃ³nâ€¦</div>

  <div class="grid">

    <!-- Conversor -->
    <div class="card">
      <label>USD</label>
      <input id="usd" oninput="calcFrom('usd')">

      <label>ARS</label>
      <input id="ars" oninput="calcFrom('ars')">

      <label>CLP Total (con IVA)</label>
      <input id="clp" oninput="calcFrom('clp')">

      <label>Neto Meta CLP (sin IVA)</label>
      <input id="neto" oninput="calcFrom('neto')">

      <div class="iva">
        IVA 19%: <span id="iva">0</span>
      </div>
    </div>

    <!-- MÃ©tricas -->
    <div class="card">

      <div class="metric">
        <h3>ðŸ”µ CPC</h3>
        <div>Sin clic: <span id="cpc1"></span></div>
        <div>Con clic: <span id="cpc2"></span></div>
        <label>Tu CPC real (CLP)</label>
        <input id="cpcR" oninput="evalMetrics()">
        <div id="cpcState" class="state"></div>
      </div>

      <div class="divider"></div>

      <div class="metric">
        <h3>ðŸŸ  Pago iniciado</h3>
        <div>Sin pago: <span id="pay1"></span></div>
        <div>Con pago: <span id="pay2"></span></div>
        <label>Tu pago real (CLP)</label>
        <input id="payR" oninput="evalMetrics()">
        <div id="payState" class="state"></div>
      </div>

      <div class="divider"></div>

      <div class="metric">
        <h3>ðŸ”´ Compra</h3>
        <div>Sin compra: <span id="buy1"></span></div>
        <div>Con compra: <span id="buy2"></span></div>
        <label>Tu CPA real (CLP)</label>
        <input id="buyR" oninput="evalMetrics()">
        <div id="buyState" class="state"></div>
      </div>

    </div>
  </div>
</div>

<script>
let TASA_ARS = 1500;
let TASA_CLP = 900;
const IVA = 1.19;

function actualizarCotizacion(){
 document.getElementById("status").innerText="Actualizando cotizaciÃ³nâ€¦";
 fetch("https://api.frankfurter.app/latest?from=USD&to=ARS,CLP")
 .then(r=>r.json())
 .then(d=>{
   TASA_ARS = d.rates.ARS;
   TASA_CLP = d.rates.CLP;
   document.getElementById("status").innerText =
     "USDâ†’ARS " + TASA_ARS.toFixed(2) +
     " | USDâ†’CLP " + TASA_CLP.toFixed(2);
   updateLimits();
 })
 .catch(()=>{
   document.getElementById("status").innerText =
     "No se pudo actualizar la cotizaciÃ³n.";
 });
}

function limpiarTodo(){
 usd.value="";
 ars.value="";
 clp.value="";
 neto.value="";
 iva.innerText="0";
}

function calcFrom(src){
 let input = document.getElementById(src);
 if(input.value===""){ limpiarTodo(); return; }

 let usdVal;
 let v=parseFloat(input.value);
 if(isNaN(v)) return;

 if(src=="usd") usdVal=v;
 if(src=="ars") usdVal=v/TASA_ARS;
 if(src=="clp") usdVal=(v/IVA)/TASA_CLP;
 if(src=="neto") usdVal=(v*IVA)/TASA_CLP;

 let arsVal=usdVal*TASA_ARS;
 let clpVal=usdVal*TASA_CLP;
 let netoVal=clpVal/IVA;

 if(src!=="usd") usd.value=usdVal.toFixed(2);
 if(src!=="ars") ars.value=Math.round(arsVal);
 if(src!=="clp") clp.value=Math.round(clpVal);
 if(src!=="neto") neto.value=Math.round(netoVal);

 iva.innerText=Math.round(clpVal-netoVal);
 updateLimits();
}

function usdToCLPNet(v){
 return Math.round((v*TASA_CLP)/IVA);
}

function updateLimits(){
 cpc1.innerText=usdToCLPNet(0.5);
 cpc2.innerText=usdToCLPNet(0.7);
 pay1.innerText=usdToCLPNet(2.5);
 pay2.innerText=usdToCLPNet(3.5);
 buy1.innerText=usdToCLPNet(9);
 buy2.innerText=usdToCLPNet(13);
 evalMetrics();
}

function setState(el,txt,cls){
 el.innerText=txt;
 el.className="state "+cls;
}

function evalMetrics(){
 let cpc=parseFloat(cpcR.value);
 let pay=parseFloat(payR.value);
 let buy=parseFloat(buyR.value);

 let cpcA=usdToCLPNet(0.5);
 let cpcB=usdToCLPNet(0.7);
 let payA=usdToCLPNet(2.5);
 let payB=usdToCLPNet(3.5);
 let buyA=usdToCLPNet(9);
 let buyB=usdToCLPNet(13);

 if(!isNaN(cpc)){
   if(cpc<=cpcA) setState(cpcState,"OK","ok");
   else if(cpc<=cpcB) setState(cpcState,"AGUANTAR","hold");
   else setState(cpcState,"CORTAR","cut");
 }

 if(!isNaN(pay)){
   if(pay<=payA) setState(payState,"OK","ok");
   else if(pay<=payB) setState(payState,"AGUANTAR","hold");
   else setState(payState,"CORTAR","cut");
 }

 if(!isNaN(buy)){
   if(buy<=buyA) setState(buyState,"OK","ok");
   else if(buy<=buyB) setState(buyState,"AGUANTAR","hold");
   else setState(buyState,"CORTAR","cut");
 }
}

actualizarCotizacion();
setInterval(actualizarCotizacion,900000);
</script>
</body>
</html>
